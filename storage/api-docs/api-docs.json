{
    "openapi": "3.0.0",
    "info": {
        "title": "API preliminar del Marketplace",
        "description": "Documentación generada con L5-Swagger para la API del Marketplace Orientado a la ciudad de Chivilcoy.",
        "contact": {
            "name": "Santiago Castellano",
            "email": "scastellano10@gmail.com"
        },
        "license": {
            "name": "MIT",
            "url": "https://opensource.org/licenses/MIT"
        },
        "version": "1.0.0"
    },
    "paths": {
        "/api/businesses": {
            "get": {
                "tags": [
                    "Negocios"
                ],
                "summary": "Listar negocios del usuario autenticado",
                "description": "Devuelve todos los negocios asociados al usuario autenticado, incluyendo sus categorías e imágenes.",
                "operationId": "b47cb8f8dbb2224c2cc513bab2da85d8",
                "responses": {
                    "200": {
                        "description": "Lista de negocios del usuario",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/components/schemas/Business"
                                    }
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Negocios"
                ],
                "summary": "Crear un nuevo negocio",
                "description": "Crear un nuevo negocio asociado al usuario autenticado. Valida el límite de negocios según la suscripción del usuario.",
                "operationId": "09636680657c34a3c34227aa276605d1",
                "requestBody": {
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "required": [
                                    "name",
                                    "address"
                                ],
                                "properties": {
                                    "name": {
                                        "type": "string",
                                        "example": "Panadería San Jorge"
                                    },
                                    "description": {
                                        "type": "string",
                                        "example": "Panadería artesanal con más de 20 años de experiencia"
                                    },
                                    "address": {
                                        "type": "string",
                                        "example": "Calle Falsa 123"
                                    },
                                    "latitude": {
                                        "type": "number",
                                        "format": "float",
                                        "example": -34.6037,
                                        "nullable": true
                                    },
                                    "longitude": {
                                        "type": "number",
                                        "format": "float",
                                        "example": -58.3816,
                                        "nullable": true
                                    },
                                    "categories": {
                                        "type": "array",
                                        "items": {
                                            "type": "integer",
                                            "example": 1
                                        }
                                    },
                                    "cover_image": {
                                        "description": "Imagen de portada del negocio",
                                        "type": "string",
                                        "format": "binary"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Negocio creado correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Business"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado para crear más negocios según su suscripción"
                    },
                    "422": {
                        "description": "Error de validación de los datos enviados"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/businesses/{business}": {
            "get": {
                "tags": [
                    "Negocios"
                ],
                "summary": "Mostrar un negocio específico",
                "description": "Devuelve la información detallada de un negocio por su ID, incluyendo sus categorías, imágenes y productos (si el usuario autenticado es el dueño).",
                "operationId": "feb0cf913a78b75503617b23b3a7d154",
                "parameters": [
                    {
                        "name": "business",
                        "in": "path",
                        "description": "ID del negocio",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Detalle del negocio",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/Business"
                                        },
                                        {
                                            "properties": {
                                                "images": {
                                                    "type": "array",
                                                    "items": {
                                                        "properties": {
                                                            "id": {
                                                                "type": "integer",
                                                                "example": 1
                                                            },
                                                            "business_id": {
                                                                "type": "integer",
                                                                "example": 1
                                                            },
                                                            "url": {
                                                                "type": "string",
                                                                "example": "http://tudominio.com/business_images/1.jpg"
                                                            },
                                                            "is_primary": {
                                                                "type": "boolean",
                                                                "example": false
                                                            },
                                                            "description": {
                                                                "type": "string",
                                                                "example": "Imagen de la fachada"
                                                            },
                                                            "created_at": {
                                                                "type": "string",
                                                                "format": "date-time",
                                                                "example": "2025-10-25T19:45:20.000000Z"
                                                            },
                                                            "updated_at": {
                                                                "type": "string",
                                                                "format": "date-time",
                                                                "example": "2025-10-25T19:45:20.000000Z"
                                                            }
                                                        },
                                                        "type": "object"
                                                    }
                                                },
                                                "first_image_url": {
                                                    "description": "URL de la primera imagen del negocio (o imagen por defecto si no hay imágenes)",
                                                    "type": "string",
                                                    "example": "http://tudominio.com/business_images/1.jpg"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "put": {
                "tags": [
                    "Negocios"
                ],
                "summary": "Actualizar un negocio",
                "description": "Actualiza la información de un negocio. Solo el dueño del negocio puede actualizarlo.",
                "operationId": "cd3ec13e27b92b89bb83a6dc56aafd20",
                "parameters": [
                    {
                        "name": "business",
                        "in": "path",
                        "description": "ID del negocio",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "name": {
                                        "type": "string",
                                        "example": "Panadería San Jorge (Actualizado)"
                                    },
                                    "description": {
                                        "type": "string",
                                        "example": "Panadería artesanal con más de 25 años de experiencia"
                                    },
                                    "address": {
                                        "type": "string",
                                        "example": "Calle Falsa 456"
                                    },
                                    "latitude": {
                                        "type": "number",
                                        "format": "float",
                                        "example": -34.6037,
                                        "nullable": true
                                    },
                                    "longitude": {
                                        "type": "number",
                                        "format": "float",
                                        "example": -58.3816,
                                        "nullable": true
                                    },
                                    "categories": {
                                        "type": "array",
                                        "items": {
                                            "type": "integer",
                                            "example": 1
                                        }
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Negocio actualizado correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Business"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado para actualizar este negocio"
                    },
                    "422": {
                        "description": "Error de validación de los datos enviados"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "Negocios"
                ],
                "summary": "Eliminar un negocio",
                "description": "Elimina un negocio existente. Solo el dueño del negocio puede eliminarlo.",
                "operationId": "1ba49b80ee03bbaf297a4bd08e88982f",
                "parameters": [
                    {
                        "name": "business",
                        "in": "path",
                        "description": "ID del negocio",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Negocio eliminado correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Negocio eliminado correctamente"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado para eliminar este negocio"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/businesses/{business}/categories/{category}": {
            "delete": {
                "tags": [
                    "Negocios"
                ],
                "summary": "Eliminar una categoría de un negocio",
                "description": "Elimina una categoría específica de un negocio. Solo el dueño del negocio puede realizar esta acción.",
                "operationId": "cc9d36e893b6b97a015c6eca4f79d12d",
                "parameters": [
                    {
                        "name": "business",
                        "in": "path",
                        "description": "ID del negocio",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "category",
                        "in": "path",
                        "description": "ID de la categoría",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Categoría eliminada del negocio correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Categoría eliminada del negocio correctamente"
                                        },
                                        "business": {
                                            "$ref": "#/components/schemas/Business"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado para eliminar categorías de este negocio"
                    },
                    "404": {
                        "description": "El negocio no tiene asignada esta categoría"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/businesses/{business}/categories": {
            "put": {
                "tags": [
                    "Negocios"
                ],
                "summary": "Actualizar las categorías de un negocio",
                "description": "Actualiza todas las categorías asociadas a un negocio. Solo el dueño del negocio puede realizar esta acción.",
                "operationId": "72531511fb2d2c1ac929a6fa06b7a9cc",
                "parameters": [
                    {
                        "name": "business",
                        "in": "path",
                        "description": "ID del negocio",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "categories": {
                                        "type": "array",
                                        "items": {
                                            "type": "integer",
                                            "example": 1
                                        }
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Categorías actualizadas correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Categorías actualizadas correctamente"
                                        },
                                        "business": {
                                            "$ref": "#/components/schemas/Business"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado para actualizar categorías de este negocio"
                    },
                    "422": {
                        "description": "Error de validación de los datos enviados"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/businesses/search": {
            "get": {
                "tags": [
                    "Negocios"
                ],
                "summary": "Buscar negocios",
                "description": "Busca negocios por nombre, categoría o ubicación.",
                "operationId": "69c06fceafc425283c96de9a39ce3856",
                "parameters": [
                    {
                        "name": "name",
                        "in": "query",
                        "description": "Nombre del negocio",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "category",
                        "in": "query",
                        "description": "ID de la categoría",
                        "required": false,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "lat",
                        "in": "query",
                        "description": "Latitud para búsqueda por ubicación",
                        "required": false,
                        "schema": {
                            "type": "number",
                            "format": "float"
                        }
                    },
                    {
                        "name": "lng",
                        "in": "query",
                        "description": "Longitud para búsqueda por ubicación",
                        "required": false,
                        "schema": {
                            "type": "number",
                            "format": "float"
                        }
                    },
                    {
                        "name": "radius",
                        "in": "query",
                        "description": "Radio de búsqueda en metros",
                        "required": false,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de negocios encontrados",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/components/schemas/Business"
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/businesses/nearby": {
            "get": {
                "tags": [
                    "Negocios"
                ],
                "summary": "Negocios cercanos",
                "description": "Devuelve los negocios cercanos a una ubicación específica, dentro de un radio determinado.",
                "operationId": "b219f678dc17a7124cf73b3486990c4d",
                "parameters": [
                    {
                        "name": "lat",
                        "in": "query",
                        "description": "Latitud",
                        "required": true,
                        "schema": {
                            "type": "number",
                            "format": "float"
                        }
                    },
                    {
                        "name": "lng",
                        "in": "query",
                        "description": "Longitud",
                        "required": true,
                        "schema": {
                            "type": "number",
                            "format": "float"
                        }
                    },
                    {
                        "name": "radius",
                        "in": "query",
                        "description": "Radio de búsqueda en metros (por defecto: 10000)",
                        "required": false,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de negocios cercanos",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/components/schemas/Business"
                                    }
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación de los parámetros de ubicación"
                    }
                }
            }
        },
        "/api/businesses/category/{category}": {
            "get": {
                "tags": [
                    "Negocios"
                ],
                "summary": "Negocios por categoría",
                "description": "Devuelve todos los negocios que pertenecen a una categoría específica.",
                "operationId": "c93e77cccccb4496c85d445a635b1cf1",
                "parameters": [
                    {
                        "name": "category",
                        "in": "path",
                        "description": "ID de la categoría",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de negocios en la categoría",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/components/schemas/Business"
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/businesses/top-rated": {
            "get": {
                "tags": [
                    "Negocios"
                ],
                "summary": "Listar negocios por calificación",
                "description": "Devuelve una lista de negocios ordenados por su calificación promedio (de mayor a menor).\n *                  Incluye la primera imagen del negocio (o una imagen por defecto si no hay imágenes).",
                "operationId": "76c4859233b4b156c6f86bf4fa0d3b6d",
                "parameters": [
                    {
                        "name": "limit",
                        "in": "query",
                        "description": "Límite de negocios a devolver (opcional, por defecto: 10).",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 10,
                            "example": 5
                        }
                    },
                    {
                        "name": "category_id",
                        "in": "query",
                        "description": "ID de la categoría para filtrar negocios (opcional).",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de negocios ordenados por calificación (éxito).",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "allOf": [
                                                    {
                                                        "$ref": "#/components/schemas/Business"
                                                    },
                                                    {
                                                        "properties": {
                                                            "avg_rating": {
                                                                "description": "Promedio de calificaciones del negocio",
                                                                "type": "number",
                                                                "format": "float",
                                                                "example": 4.5
                                                            },
                                                            "ratings_count": {
                                                                "description": "Cantidad total de calificaciones",
                                                                "type": "integer",
                                                                "example": 25
                                                            },
                                                            "first_image_url": {
                                                                "description": "URL de la primera imagen del negocio (o imagen por defecto si no hay imágenes)",
                                                                "type": "string",
                                                                "example": "http://tudominio.com/business_images/1.jpg"
                                                            }
                                                        },
                                                        "type": "object"
                                                    }
                                                ]
                                            }
                                        },
                                        "links": {
                                            "description": "Enlaces de paginación",
                                            "type": "object"
                                        },
                                        "meta": {
                                            "description": "Metadatos de la paginación",
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/businesses/{business}/cover-image": {
            "post": {
                "tags": [
                    "Negocios"
                ],
                "summary": "Subir o actualizar la imagen de portada de un negocio",
                "description": "Sube o actualiza la imagen de portada de un negocio específico. Solo el dueño del negocio puede subir imágenes. La imagen se redimensiona automáticamente a 1200x630 píxeles (proporción 16:9) para optimizar el almacenamiento y la visualización.",
                "operationId": "e1a6069c0ae332486196886105fcda81",
                "parameters": [
                    {
                        "name": "business",
                        "in": "path",
                        "description": "ID del negocio",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "description": "Imagen de portada",
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "required": [
                                    "cover_image"
                                ],
                                "properties": {
                                    "cover_image": {
                                        "description": "Archivo de imagen de portada (JPEG, PNG, JPG, GIF). Máximo 2MB.",
                                        "type": "string",
                                        "format": "binary"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Imagen de portada subida correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Business"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado para subir imágenes a este negocio"
                    },
                    "422": {
                        "description": "Error de validación de los datos enviados"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/businesses/{business}/images": {
            "post": {
                "tags": [
                    "Imágenes de Negocio"
                ],
                "summary": "Subir una imagen para un negocio",
                "description": "Sube una imagen asociada a un negocio específico. Solo el dueño del negocio puede subir imágenes. Si se marca como principal, se desmarcará automáticamente la imagen principal actual.",
                "operationId": "6814b7ce77344cd0bf3b67337440d226",
                "parameters": [
                    {
                        "name": "business",
                        "in": "path",
                        "description": "ID del negocio",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "description": "Imagen y datos adicionales",
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "required": [
                                    "image"
                                ],
                                "properties": {
                                    "image": {
                                        "description": "Archivo de imagen (JPEG, PNG, JPG, GIF)",
                                        "type": "string",
                                        "format": "binary"
                                    },
                                    "is_primary": {
                                        "description": "Indica si la imagen es la principal del negocio",
                                        "type": "boolean",
                                        "example": false
                                    },
                                    "description": {
                                        "description": "Descripción opcional de la imagen",
                                        "type": "string",
                                        "example": "Fachada de la panadería"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Imagen subida correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/BusinessImage"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado para subir imágenes a este negocio"
                    },
                    "422": {
                        "description": "Error de validación de los datos enviados"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/businesses/{business}/images/{image}": {
            "delete": {
                "tags": [
                    "Imágenes de Negocio"
                ],
                "summary": "Eliminar una imagen de un negocio",
                "description": "Elimina una imagen específica de un negocio. Solo el dueño del negocio puede eliminar imágenes. Si la imagen eliminada era la principal, se asignará automáticamente otra imagen como principal (si existe).",
                "operationId": "26215df562e8206d3136936dac90aad1",
                "parameters": [
                    {
                        "name": "business",
                        "in": "path",
                        "description": "ID del negocio",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "image",
                        "in": "path",
                        "description": "ID de la imagen",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Imagen eliminada correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Imagen eliminada correctamente"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado para eliminar imágenes de este negocio"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "patch": {
                "tags": [
                    "Imágenes de Negocio"
                ],
                "summary": "Actualizar una imagen de un negocio",
                "description": "Actualiza la descripción o el estado de principal de una imagen específica de un negocio. Solo el dueño del negocio puede actualizar imágenes. Si se marca como principal, se desmarcará automáticamente la imagen principal actual.",
                "operationId": "b1fd6ec91a6e0cb47158deaa0e8a8a83",
                "parameters": [
                    {
                        "name": "business",
                        "in": "path",
                        "description": "ID del negocio",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "image",
                        "in": "path",
                        "description": "ID de la imagen",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "is_primary": {
                                        "description": "Indica si la imagen debe ser la principal",
                                        "type": "boolean",
                                        "example": true
                                    },
                                    "description": {
                                        "description": "Nueva descripción de la imagen",
                                        "type": "string",
                                        "example": "Fachada renovada de la panadería"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Imagen actualizada correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/BusinessImage"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado para actualizar imágenes de este negocio"
                    },
                    "422": {
                        "description": "Error de validación de los datos enviados"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/businesses/{business}/images/reset-primary": {
            "patch": {
                "tags": [
                    "Imágenes de Negocio"
                ],
                "summary": "Restablecer imágenes principales de un negocio",
                "description": "Restablece todas las imágenes de un negocio para que ninguna sea principal. Solo el dueño del negocio puede realizar esta acción.",
                "operationId": "87d3139529478f4a75b3e996fc438d0d",
                "parameters": [
                    {
                        "name": "business",
                        "in": "path",
                        "description": "ID del negocio",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Imágenes restablecidas correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Imágenes restablecidas"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado para restablecer imágenes de este negocio"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/businesses/{business}/logo": {
            "post": {
                "tags": [
                    "Logo de Negocio"
                ],
                "summary": "Subir el logo de un negocio",
                "description": "Sube el logo asociado a un negocio específico. Solo el dueño del negocio puede subir el logo.",
                "operationId": "9e2a3bef805ef7f3f24a3a087890467d",
                "parameters": [
                    {
                        "name": "business",
                        "in": "path",
                        "description": "ID del negocio",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "description": "Archivo de logo (JPEG, PNG, JPG, GIF, máximo 1MB)",
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "required": [
                                    "logo"
                                ],
                                "properties": {
                                    "logo": {
                                        "description": "Archivo de imagen del logo",
                                        "type": "string",
                                        "format": "binary"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Logo subido correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Business"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "No autorizado"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "logo": {
                                            "type": "array",
                                            "items": {
                                                "type": "string",
                                                "example": [
                                                    "El campo logo debe ser una imagen de tipo: jpeg, png, jpg, gif."
                                                ]
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "Logo de Negocio"
                ],
                "summary": "Eliminar el logo de un negocio",
                "description": "Elimina el logo asociado a un negocio específico. Solo el dueño del negocio puede eliminar el logo.",
                "operationId": "0d227ea99d69121db430d51e78942c19",
                "parameters": [
                    {
                        "name": "business",
                        "in": "path",
                        "description": "ID del negocio",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Logo eliminado correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Logo eliminado correctamente"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "No autorizado"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/businesses/{business}/ratings": {
            "get": {
                "tags": [
                    "BusinessRatings"
                ],
                "summary": "Listar calificaciones de un negocio",
                "description": "Devuelve todas las calificaciones de un negocio, incluyendo el promedio y el total.",
                "operationId": "9e53f6d598bb536960e8da4313b1897b",
                "parameters": [
                    {
                        "name": "business",
                        "in": "path",
                        "description": "ID del negocio",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de calificaciones y promedio",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "ratings": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/BusinessRating"
                                            }
                                        },
                                        "average_rating": {
                                            "type": "number",
                                            "format": "float",
                                            "example": 4.5
                                        },
                                        "total_ratings": {
                                            "type": "integer",
                                            "example": 10
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "BusinessRatings"
                ],
                "summary": "Calificar un negocio",
                "description": "Permite a un usuario calificar la calidad del servicio de un negocio (1-5 estrellas).",
                "operationId": "9b27d228eee3b471f17139e9941ce85f",
                "parameters": [
                    {
                        "name": "business",
                        "in": "path",
                        "description": "ID del negocio a calificar",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "service_quality"
                                ],
                                "properties": {
                                    "service_quality": {
                                        "description": "Calificación (1-5 estrellas)",
                                        "type": "integer",
                                        "example": 5
                                    },
                                    "comment": {
                                        "description": "Comentario opcional",
                                        "type": "string",
                                        "example": "Excelente servicio y atención al cliente"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Calificación registrada correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Calificación registrada correctamente"
                                        },
                                        "rating": {
                                            "$ref": "#/components/schemas/BusinessRating"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado (ej: ya calificaste este negocio)",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Ya has calificado este negocio."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Error de validación"
                                        },
                                        "errors": {
                                            "type": "object",
                                            "example": {
                                                "service_quality": [
                                                    "The service quality field is required."
                                                ]
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/categories": {
            "get": {
                "tags": [
                    "Categorías"
                ],
                "summary": "Listar todas las categorías de negocios",
                "description": "Devuelve un listado de todas las categorías de negocios registradas.",
                "operationId": "8e17a9627dbed245cf032f867569cf11",
                "responses": {
                    "200": {
                        "description": "Lista de categorías",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/components/schemas/BusinessCategory"
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Categorías"
                ],
                "summary": "Crear una nueva categoría",
                "description": "Crea una nueva categoría de negocio.",
                "operationId": "2140f330d926c3e118cab9391dc4ff42",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "name": {
                                        "type": "string",
                                        "example": "Restaurantes"
                                    },
                                    "description": {
                                        "type": "string",
                                        "example": "Negocios gastronómicos"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Categoría creada correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/BusinessCategory"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación de los datos enviados"
                    }
                }
            }
        },
        "/api/categories/{businessCategory}": {
            "get": {
                "tags": [
                    "Categorías"
                ],
                "summary": "Mostrar una categoría específica",
                "description": "Devuelve la información detallada de una categoría por su ID.",
                "operationId": "d7cc7db22f5c7a73ee20100b737a489b",
                "parameters": [
                    {
                        "name": "businessCategory",
                        "in": "path",
                        "description": "ID de la categoría",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Detalle de la categoría",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/BusinessCategory"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Categoría no encontrada"
                    }
                }
            }
        },
        "/api/track-contact": {
            "post": {
                "tags": [
                    "Contacts"
                ],
                "summary": "Registrar un contacto con un negocio o producto",
                "description": "Registra cuando un usuario realiza una acción que indica interés en un negocio o producto (ej: ver teléfono, hacer clic en sitio web, etc.)",
                "operationId": "7d1ed8cef9f59a54e1af72f58aab2668",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Contact"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Contacto registrado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Contacto registrado"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Error de validación"
                                        },
                                        "errors": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Negocio no encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Negocio no encontrado"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/businesses/{business}/contact-stats": {
            "get": {
                "tags": [
                    "Contacts"
                ],
                "summary": "Obtener estadísticas de contactos para un negocio",
                "description": "Devuelve estadísticas de contactos para un negocio específico en los últimos 30 días",
                "operationId": "7826a17d4e175cf03d278e57edfd9002",
                "parameters": [
                    {
                        "name": "business",
                        "in": "path",
                        "description": "ID del negocio",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Estadísticas de contactos",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "last_30_days": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "date": {
                                                        "type": "string",
                                                        "format": "date",
                                                        "example": "2025-10-26"
                                                    },
                                                    "count": {
                                                        "type": "integer",
                                                        "example": 5
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        },
                                        "by_type": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "contact_type": {
                                                        "type": "string",
                                                        "example": "phone_view"
                                                    },
                                                    "count": {
                                                        "type": "integer",
                                                        "example": 3
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        },
                                        "total": {
                                            "type": "integer",
                                            "example": 42
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "No autorizado"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Negocio no encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Negocio no encontrado"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/businesses/{business}/discount-tokens": {
            "post": {
                "tags": [
                    "DiscountTokens"
                ],
                "summary": "Generar un token de descuento para un negocio",
                "description": "Genera un token de descuento que el usuario puede presentar al negocio",
                "operationId": "4d2b95e3c3c29b842c7ecd55bfdfb22f",
                "parameters": [
                    {
                        "name": "business",
                        "in": "path",
                        "description": "ID del negocio",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "discount_type",
                                    "discount_value",
                                    "valid_days"
                                ],
                                "properties": {
                                    "product_id": {
                                        "description": "ID del producto (opcional)",
                                        "type": "integer",
                                        "example": 1
                                    },
                                    "discount_type": {
                                        "description": "Tipo de descuento",
                                        "type": "string",
                                        "enum": [
                                            "percentage",
                                            "fixed"
                                        ],
                                        "example": "percentage"
                                    },
                                    "discount_value": {
                                        "description": "Valor del descuento (10 para 10% o 5.00 para $5)",
                                        "type": "number",
                                        "example": 10
                                    },
                                    "min_purchase": {
                                        "description": "Mínimo de compra requerido (opcional)",
                                        "type": "number",
                                        "example": 50
                                    },
                                    "valid_days": {
                                        "description": "Días de validez desde hoy",
                                        "type": "integer",
                                        "example": 7
                                    },
                                    "description": {
                                        "description": "Descripción del descuento",
                                        "type": "string",
                                        "example": "10% de descuento en tu próxima compra"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Token generado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/DiscountToken"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Error de validación"
                                        },
                                        "errors": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "No autorizado"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/users/me/discount-tokens": {
            "get": {
                "tags": [
                    "DiscountTokens"
                ],
                "summary": "Listar tokens de descuento del usuario",
                "description": "Devuelve todos los tokens de descuento generados por el usuario actual",
                "operationId": "ebc1d30f3541ece907f61ef92ae6d3a9",
                "responses": {
                    "200": {
                        "description": "Lista de tokens de descuento",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/components/schemas/DiscountToken"
                                    }
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/discount-tokens/{token}": {
            "get": {
                "tags": [
                    "DiscountTokens"
                ],
                "summary": "Ver detalles de un token de descuento",
                "description": "Devuelve los detalles de un token de descuento usando su código",
                "operationId": "77a66771b139b2d09619525c4ba49de1",
                "parameters": [
                    {
                        "name": "token",
                        "in": "path",
                        "description": "Código del token de descuento",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Detalles del token",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/DiscountToken"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Token no encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Token no encontrado"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/discount-tokens/{token}/use": {
            "post": {
                "tags": [
                    "DiscountTokens"
                ],
                "summary": "Usar un token de descuento",
                "description": "Registra el uso de un token de descuento por parte de un cliente",
                "operationId": "ed6260f9054946a962e74a79abe0f112",
                "parameters": [
                    {
                        "name": "token",
                        "in": "path",
                        "description": "Código del token de descuento",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Token usado exitosamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Token usado exitosamente"
                                        },
                                        "confirmation_code": {
                                            "description": "Código para que el negocio confirme el uso",
                                            "type": "string",
                                            "example": "ABCD1234"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Token no válido o ya usado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Token no válido o ya usado"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Token no encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Token no encontrado"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/discount-tokens/{token}/confirm": {
            "post": {
                "tags": [
                    "DiscountTokens"
                ],
                "summary": "Confirmar uso de un token de descuento",
                "description": "Permite al negocio confirmar que el token fue usado correctamente",
                "operationId": "e8c2048a4384557c188abc11dc4c148a",
                "parameters": [
                    {
                        "name": "token",
                        "in": "path",
                        "description": "Código del token de descuento",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "confirmation_code"
                                ],
                                "properties": {
                                    "confirmation_code": {
                                        "description": "Código de confirmación generado al usar el token",
                                        "type": "string",
                                        "example": "ABCD1234"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Uso del token confirmado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Uso del token confirmado"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Código de confirmación inválido",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Código de confirmación inválido"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado (el usuario no es dueño del negocio)",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "No autorizado"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Token no encontrado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Token no encontrado"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/image/{filename}": {
            "get": {
                "tags": [
                    "Imágenes"
                ],
                "summary": "Obtener imagen de portada de un negocio",
                "description": "Devuelve la imagen de portada de un negocio en formato binario. El nombre del archivo debe coincidir con el almacenado en el campo `cover_image_url` del negocio.",
                "operationId": "13437db729bed3d3db8d05f9db0076b4",
                "parameters": [
                    {
                        "name": "filename",
                        "in": "path",
                        "description": "Nombre del archivo de la imagen de portada (ej: '698397b188896.png').",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Imagen de portada del negocio en formato binario (PNG, JPEG, etc.).",
                        "content": {
                            "image/png": {
                                "schema": {
                                    "type": "string",
                                    "format": "binary"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Imagen no encontrada."
                    }
                }
            }
        },
        "/api/conversations/start": {
            "post": {
                "tags": [
                    "Messaging"
                ],
                "summary": "Iniciar una conversación",
                "description": "Inicia una conversación con otro usuario o devuelve una existente",
                "operationId": "76522312ae79d375e923822f2fb6c2c2",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "user_id"
                                ],
                                "properties": {
                                    "user_id": {
                                        "description": "ID del otro usuario",
                                        "type": "integer",
                                        "example": 2
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Conversación iniciada",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Conversación iniciada"
                                        },
                                        "conversation": {
                                            "$ref": "#/components/schemas/Conversation"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Error de validación"
                                        },
                                        "errors": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/messages": {
            "post": {
                "tags": [
                    "Messaging"
                ],
                "summary": "Enviar un mensaje",
                "description": "Envía un mensaje a una conversación existente",
                "operationId": "a31857923721e1a9da93f76f72a8b668",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "conversation_id",
                                    "message"
                                ],
                                "properties": {
                                    "conversation_id": {
                                        "description": "ID de la conversación",
                                        "type": "integer",
                                        "example": 1
                                    },
                                    "message": {
                                        "description": "Contenido del mensaje",
                                        "type": "string",
                                        "example": "Hola, ¿cómo estás?"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Mensaje enviado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Mensaje enviado exitosamente"
                                        },
                                        "data": {
                                            "$ref": "#/components/schemas/Message"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Error de validación"
                                        },
                                        "errors": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "No autorizado"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/conversations/{conversation}/messages": {
            "get": {
                "tags": [
                    "Messaging"
                ],
                "summary": "Listar mensajes de una conversación",
                "description": "Devuelve todos los mensajes de una conversación específica",
                "operationId": "b6ea6f46dfce44f28214ff956927c977",
                "parameters": [
                    {
                        "name": "conversation",
                        "in": "path",
                        "description": "ID de la conversación",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de mensajes",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/components/schemas/Message"
                                    }
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "No autorizado"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/conversations": {
            "get": {
                "tags": [
                    "Messaging"
                ],
                "summary": "Listar conversaciones del usuario",
                "description": "Devuelve todas las conversaciones del usuario autenticado",
                "operationId": "d9d572db8a0fb56b74a9fece20bc2757",
                "responses": {
                    "200": {
                        "description": "Lista de conversaciones",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "properties": {
                                            "id": {
                                                "type": "integer",
                                                "example": 1
                                            },
                                            "user1_id": {
                                                "type": "integer",
                                                "example": 1
                                            },
                                            "user2_id": {
                                                "type": "integer",
                                                "example": 2
                                            },
                                            "other_user": {
                                                "properties": {
                                                    "id": {
                                                        "type": "integer",
                                                        "example": 2
                                                    },
                                                    "name": {
                                                        "type": "string",
                                                        "example": "María Gómez"
                                                    }
                                                },
                                                "type": "object"
                                            },
                                            "last_message": {
                                                "properties": {
                                                    "id": {
                                                        "type": "integer",
                                                        "example": 5
                                                    },
                                                    "message": {
                                                        "type": "string",
                                                        "example": "Hola, ¿cómo estás?"
                                                    },
                                                    "created_at": {
                                                        "type": "string",
                                                        "format": "date-time",
                                                        "example": "2025-11-21T18:01:00.000000Z"
                                                    },
                                                    "is_read": {
                                                        "type": "boolean",
                                                        "example": true
                                                    }
                                                },
                                                "type": "object"
                                            },
                                            "unread_count": {
                                                "type": "integer",
                                                "example": 1
                                            }
                                        },
                                        "type": "object"
                                    }
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/notifications": {
            "get": {
                "tags": [
                    "Messaging"
                ],
                "summary": "Listar notificaciones del usuario",
                "description": "Devuelve las notificaciones no leídas del usuario autenticado",
                "operationId": "cde09f4470d63cbaea8b927664120d34",
                "responses": {
                    "200": {
                        "description": "Lista de notificaciones",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "properties": {
                                            "id": {
                                                "type": "string",
                                                "example": "uuid-notification-id"
                                            },
                                            "type": {
                                                "type": "string",
                                                "example": "App\\Notifications\\NewMessageNotification"
                                            },
                                            "data": {
                                                "properties": {
                                                    "message_id": {
                                                        "type": "integer",
                                                        "example": 1
                                                    },
                                                    "conversation_id": {
                                                        "type": "integer",
                                                        "example": 1
                                                    },
                                                    "sender_id": {
                                                        "type": "integer",
                                                        "example": 2
                                                    },
                                                    "sender_name": {
                                                        "type": "string",
                                                        "example": "Juan Pérez"
                                                    },
                                                    "message": {
                                                        "type": "string",
                                                        "example": "Hola, ¿cómo estás?"
                                                    },
                                                    "created_at": {
                                                        "type": "string",
                                                        "format": "date-time",
                                                        "example": "2025-11-21T18:01:00.000000Z"
                                                    }
                                                },
                                                "type": "object"
                                            },
                                            "read_at": {
                                                "type": "string",
                                                "format": "date-time",
                                                "example": null
                                            }
                                        },
                                        "type": "object"
                                    }
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/notifications/{notification}/read": {
            "post": {
                "tags": [
                    "Messaging"
                ],
                "summary": "Marcar notificación como leída",
                "description": "Marca una notificación como leída",
                "operationId": "3a53b6b434edcf8bb60e9acbf22e3105",
                "parameters": [
                    {
                        "name": "notification",
                        "in": "path",
                        "description": "ID de la notificación",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Notificación marcada como leída",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Notificación marcada como leída"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/product-categories": {
            "get": {
                "tags": [
                    "Categorías de Productos"
                ],
                "summary": "Listar categorías de productos",
                "description": "Devuelve todas las categorías de productos activas, con sus subcategorías.",
                "operationId": "fe28bcf484f6ac601457842c89754862",
                "responses": {
                    "200": {
                        "description": "Listado de categorías",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "type": "object"
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Categorías de Productos"
                ],
                "summary": "Crear categoría de producto",
                "description": "Permite crear una nueva categoría de productos. Requiere autenticación.",
                "operationId": "d69ad648a077f65a03af6ba67d0ec97d",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "name"
                                ],
                                "properties": {
                                    "name": {
                                        "type": "string",
                                        "example": "Electrónica"
                                    },
                                    "description": {
                                        "type": "string",
                                        "example": "Dispositivos y accesorios tecnológicos"
                                    },
                                    "parent_id": {
                                        "type": "integer",
                                        "example": null
                                    },
                                    "is_active": {
                                        "type": "boolean",
                                        "example": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Categoría creada correctamente"
                    },
                    "422": {
                        "description": "Error de validación"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/product-categories/{id}": {
            "get": {
                "tags": [
                    "Categorías de Productos"
                ],
                "summary": "Mostrar categoría de producto",
                "description": "Obtiene una categoría de producto con su jerarquía completa.",
                "operationId": "33b65b6a03e881faaaf063ed6a4bbc95",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID de la categoría",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Categoría encontrada",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Categoría no encontrada"
                    }
                }
            },
            "put": {
                "tags": [
                    "Categorías de Productos"
                ],
                "summary": "Actualizar categoría de producto",
                "description": "Modifica los datos de una categoría existente.",
                "operationId": "30f66eb8e21af090f749ef3493f1977a",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "name": {
                                        "type": "string",
                                        "example": "Electrodomésticos"
                                    },
                                    "description": {
                                        "type": "string",
                                        "example": "Artículos para el hogar"
                                    },
                                    "is_active": {
                                        "type": "boolean",
                                        "example": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Categoría actualizada correctamente"
                    },
                    "422": {
                        "description": "Error de validación"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "Categorías de Productos"
                ],
                "summary": "Eliminar categoría de producto",
                "description": "Elimina una categoría si no tiene productos asociados.",
                "operationId": "23ffcb62480e8b37f45858d4e0b270f6",
                "responses": {
                    "200": {
                        "description": "Categoría eliminada correctamente"
                    },
                    "409": {
                        "description": "No se puede eliminar: tiene productos asociados"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/businesses/{business}/products": {
            "get": {
                "tags": [
                    "Productos"
                ],
                "summary": "Listar productos de un negocio",
                "description": "Devuelve todos los productos asociados a un negocio específico.",
                "operationId": "3b35a2a18c19c7411b78f64b06860d06",
                "parameters": [
                    {
                        "name": "business",
                        "in": "path",
                        "description": "ID del negocio",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de productos del negocio",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/components/schemas/Product"
                                    }
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado para ver este negocio"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Productos"
                ],
                "summary": "Crear un nuevo producto",
                "description": "Crea un nuevo producto asociado a un negocio. Solo el dueño del negocio puede crear productos.",
                "operationId": "f86b82f901f67c383e58233d1cd806ff",
                "parameters": [
                    {
                        "name": "business",
                        "in": "path",
                        "description": "ID del negocio",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "name": {
                                        "type": "string",
                                        "example": "Pan integral artesanal"
                                    },
                                    "description": {
                                        "type": "string",
                                        "example": "Pan casero con semillas de lino"
                                    },
                                    "price": {
                                        "type": "number",
                                        "format": "float",
                                        "example": 320.5
                                    },
                                    "stock": {
                                        "type": "integer",
                                        "example": 40
                                    },
                                    "category_id": {
                                        "type": "integer",
                                        "example": 5
                                    },
                                    "is_active": {
                                        "type": "boolean, example=true"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Producto creado correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Product"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado para crear productos en este negocio o límite de productos alcanzado"
                    },
                    "422": {
                        "description": "Error de validación de los datos enviados"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/products/search": {
            "get": {
                "tags": [
                    "Productos"
                ],
                "summary": "Buscar productos",
                "description": "Busca productos por nombre, descripción, categoría, negocio o rango de precios.",
                "operationId": "131a3b23ed0ecb009a18b85cc2d55ba2",
                "parameters": [
                    {
                        "name": "query",
                        "in": "query",
                        "description": "Término general de búsqueda",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "name",
                        "in": "query",
                        "description": "Nombre del producto",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "description",
                        "in": "query",
                        "description": "Descripción del producto",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "category",
                        "in": "query",
                        "description": "ID de la categoría",
                        "required": false,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "business",
                        "in": "query",
                        "description": "ID del negocio",
                        "required": false,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "min_price",
                        "in": "query",
                        "description": "Precio mínimo",
                        "required": false,
                        "schema": {
                            "type": "number",
                            "format": "float"
                        }
                    },
                    {
                        "name": "max_price",
                        "in": "query",
                        "description": "Precio máximo",
                        "required": false,
                        "schema": {
                            "type": "number",
                            "format": "float"
                        }
                    },
                    {
                        "name": "sort_by",
                        "in": "query",
                        "description": "Campo para ordenar (price, name, created_at)",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "order",
                        "in": "query",
                        "description": "Orden (asc o desc)",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de productos encontrada",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/components/schemas/Product"
                                    }
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/products/category/{category}": {
            "get": {
                "tags": [
                    "Productos"
                ],
                "summary": "Listar productos por categoría",
                "description": "Devuelve todos los productos pertenecientes a una categoría específica.",
                "operationId": "2bb9f728cfeea86d4fecf5cbb679f487",
                "parameters": [
                    {
                        "name": "category",
                        "in": "path",
                        "description": "ID de la categoría",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de productos en la categoría",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/components/schemas/Product"
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Categoría no encontrada"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/products/business/{business}": {
            "get": {
                "tags": [
                    "Productos"
                ],
                "summary": "Listar productos por negocio",
                "description": "Obtiene los productos asociados a un negocio específico.",
                "operationId": "290255c24e58d241dbe5f009706cda3c",
                "parameters": [
                    {
                        "name": "business",
                        "in": "path",
                        "description": "ID del negocio",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de productos del negocio",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/components/schemas/Product"
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Negocio no encontrado"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/products/{product}": {
            "get": {
                "tags": [
                    "Productos"
                ],
                "summary": "Mostrar un producto específico",
                "description": "Devuelve la información detallada de un producto por su ID.",
                "operationId": "b81526f9d1e382fc48b3a150f7ffae13",
                "parameters": [
                    {
                        "name": "product",
                        "in": "path",
                        "description": "ID del producto",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Detalle del producto",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Product"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Producto no encontrado"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "put": {
                "tags": [
                    "Productos"
                ],
                "summary": "Actualizar un producto existente",
                "description": "Permite modificar los datos de un producto. Solo el propietario del negocio puede actualizarlo.",
                "operationId": "d18ab82eb18e3d1edbfb573c8a63da67",
                "parameters": [
                    {
                        "name": "product",
                        "in": "path",
                        "description": "ID del producto a actualizar",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "name": {
                                        "type": "string",
                                        "example": "Pan integral artesanal"
                                    },
                                    "description": {
                                        "type": "string",
                                        "example": "Pan casero con semillas de lino"
                                    },
                                    "price": {
                                        "type": "number",
                                        "format": "float",
                                        "example": 320.5
                                    },
                                    "stock": {
                                        "type": "integer",
                                        "example": 40
                                    },
                                    "category_id": {
                                        "type": "integer",
                                        "example": 5
                                    },
                                    "is_active": {
                                        "type": "boolean",
                                        "example": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Producto actualizado correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Product"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado para actualizar este producto"
                    },
                    "422": {
                        "description": "Error de validación de los datos enviados"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "Productos"
                ],
                "summary": "Eliminar un producto",
                "description": "Elimina un producto existente. Solo el propietario del negocio puede realizar esta acción.",
                "operationId": "6b585b56bcc292f37b5376d7e5e3e9df",
                "parameters": [
                    {
                        "name": "product",
                        "in": "path",
                        "description": "ID del producto a eliminar",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Producto eliminado correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Producto eliminado correctamente"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado para eliminar este producto"
                    },
                    "404": {
                        "description": "Producto no encontrado"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/products/{product}/images": {
            "get": {
                "tags": [
                    "ProductImages"
                ],
                "summary": "Listar imágenes de un producto",
                "description": "Devuelve todas las imágenes asociadas a un producto.",
                "operationId": "96163fbbc224a3a5c3b99238219e0941",
                "parameters": [
                    {
                        "name": "product",
                        "in": "path",
                        "description": "ID del producto",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de imágenes del producto",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/components/schemas/ProductImage"
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "ProductImages"
                ],
                "summary": "Subir una imagen para un producto",
                "description": "Sube una imagen y la asocia a un producto. Solo el dueño del negocio puede subir imágenes.",
                "operationId": "906134c47d2049bc1bf106cc9ccd415d",
                "parameters": [
                    {
                        "name": "product",
                        "in": "path",
                        "description": "ID del producto",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "description": "Imagen a subir (form-data)",
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "required": [
                                    "image"
                                ],
                                "properties": {
                                    "image": {
                                        "description": "Archivo de imagen",
                                        "type": "string",
                                        "format": "binary"
                                    },
                                    "is_primary": {
                                        "description": "Si es la imagen principal",
                                        "type": "boolean",
                                        "example": false
                                    },
                                    "description": {
                                        "description": "Descripción de la imagen",
                                        "type": "string",
                                        "example": "Foto del producto desde el frente"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Imagen subida correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ProductImage"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado para subir imágenes a este producto"
                    },
                    "422": {
                        "description": "Error de validación (ej: archivo no es una imagen)"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/products/{product}/images/{image}": {
            "delete": {
                "tags": [
                    "ProductImages"
                ],
                "summary": "Eliminar una imagen de un producto",
                "description": "Elimina una imagen específica de un producto. Solo el dueño del negocio puede hacerlo.",
                "operationId": "5a73295f3ceed517e0897a26280ae563",
                "parameters": [
                    {
                        "name": "product",
                        "in": "path",
                        "description": "ID del producto",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "image",
                        "in": "path",
                        "description": "ID de la imagen",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Imagen eliminada correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Imagen eliminada correctamente"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado para eliminar esta imagen"
                    },
                    "404": {
                        "description": "Imagen no encontrada"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/products/{product}/images/{image}/set-primary": {
            "patch": {
                "tags": [
                    "ProductImages"
                ],
                "summary": "Establecer una imagen como principal",
                "description": "Marca una imagen como la principal del producto. Solo el dueño del negocio puede hacerlo.",
                "operationId": "d8ea953ad0800e505e34d00ede92631a",
                "parameters": [
                    {
                        "name": "product",
                        "in": "path",
                        "description": "ID del producto",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "image",
                        "in": "path",
                        "description": "ID de la imagen",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Imagen establecida como principal",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Imagen principal actualizada correctamente"
                                        },
                                        "image": {
                                            "$ref": "#/components/schemas/ProductImage"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado para modificar este producto"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/products/{product}/ratings": {
            "get": {
                "tags": [
                    "ProductRatings"
                ],
                "summary": "Listar calificaciones de un producto",
                "description": "Devuelve todas las calificaciones de un producto, incluyendo el promedio y el total.",
                "operationId": "caf8c13cc6b71a98d4374763a29c0bf0",
                "parameters": [
                    {
                        "name": "product",
                        "in": "path",
                        "description": "ID del producto",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Lista de calificaciones y promedio",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "ratings": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/ProductRating"
                                            }
                                        },
                                        "average_rating": {
                                            "type": "number",
                                            "format": "float",
                                            "example": 4.2
                                        },
                                        "total_ratings": {
                                            "type": "integer",
                                            "example": 5
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "ProductRatings"
                ],
                "summary": "Calificar un producto",
                "description": "Permite a un usuario calificar la calidad de un producto (1-5 estrellas).",
                "operationId": "73019aae4cfa260c9b518f49922e9e19",
                "parameters": [
                    {
                        "name": "product",
                        "in": "path",
                        "description": "ID del producto a calificar",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "quality"
                                ],
                                "properties": {
                                    "quality": {
                                        "description": "Calificación (1-5 estrellas)",
                                        "type": "integer",
                                        "example": 4
                                    },
                                    "comment": {
                                        "description": "Comentario opcional",
                                        "type": "string",
                                        "example": "Producto de buena calidad, cumple con lo prometido"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Calificación registrada correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Calificación registrada correctamente"
                                        },
                                        "rating": {
                                            "$ref": "#/components/schemas/ProductRating"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "No autorizado (ej: ya calificaste este producto)",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Ya has calificado este producto."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Error de validación"
                                        },
                                        "errors": {
                                            "type": "object",
                                            "example": {
                                                "quality": [
                                                    "The quality field is required."
                                                ]
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/search": {
            "get": {
                "tags": [
                    "Búsquedas"
                ],
                "summary": "Búsqueda global de negocios y productos",
                "description": "Busca tanto en negocios como productos según el término ingresado. Permite filtrar por ubicación y radio.",
                "operationId": "90d4505b4c8f3ae19c7bd38f5486dd55",
                "parameters": [
                    {
                        "name": "query",
                        "in": "query",
                        "description": "Texto de búsqueda",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "lat",
                        "in": "query",
                        "description": "Latitud del usuario",
                        "schema": {
                            "type": "number",
                            "format": "float"
                        }
                    },
                    {
                        "name": "lng",
                        "in": "query",
                        "description": "Longitud del usuario",
                        "schema": {
                            "type": "number",
                            "format": "float"
                        }
                    },
                    {
                        "name": "radius",
                        "in": "query",
                        "description": "Radio de búsqueda en metros (por defecto 10000)",
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Resultados encontrados",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "businesses": {
                                            "type": "array",
                                            "items": {
                                                "type": "object"
                                            }
                                        },
                                        "products": {
                                            "type": "array",
                                            "items": {
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "No se envió query de búsqueda"
                    }
                }
            }
        },
        "/api/subscription": {
            "get": {
                "tags": [
                    "Suscripciones"
                ],
                "summary": "Obtener suscripción actual",
                "description": "Devuelve la suscripción actual del usuario autenticado. Si no tiene suscripción, crea una por defecto (plan 'free').",
                "operationId": "03430c7a696aa2c8bcd5cb67d41d9698",
                "responses": {
                    "200": {
                        "description": "Suscripción del usuario",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Subscription"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/subscription/upgrade": {
            "put": {
                "tags": [
                    "Suscripciones"
                ],
                "summary": "Actualizar suscripción",
                "description": "Actualiza el plan de suscripción del usuario autenticado. Si el plan no es 'free', se requiere un método de pago.",
                "operationId": "a9e08eb64a7fbaa6f1ef73d1d81df786",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "plan": {
                                        "type": "string",
                                        "enum": [
                                            "free",
                                            "basic",
                                            "premium",
                                            "enterprise"
                                        ],
                                        "example": "premium"
                                    },
                                    "payment_method": {
                                        "type": "string",
                                        "enum": [
                                            "mercadopago",
                                            "transferencia",
                                            "tarjeta"
                                        ],
                                        "example": "mercadopago",
                                        "nullable": true
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Suscripción actualizada correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "¡Suscripción actualizada a Premium! Ahora puedes tener hasta 10 negocios y 500 productos."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación de los datos enviados"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/subscription/check-business-creation": {
            "get": {
                "tags": [
                    "Suscripciones"
                ],
                "summary": "Verificar si puede crear un negocio",
                "description": "Verifica si el usuario autenticado puede crear un nuevo negocio según su suscripción actual.",
                "operationId": "154077471cae1564db30a04b69450305",
                "responses": {
                    "200": {
                        "description": "Resultado de la verificación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "can_create": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Puedes crear un nuevo negocio."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/subscription/check-product-creation/{business}": {
            "get": {
                "tags": [
                    "Suscripciones"
                ],
                "summary": "Verificar si puede crear un producto",
                "description": "Verifica si el usuario autenticado puede crear un nuevo producto en un negocio específico según su suscripción actual.",
                "operationId": "d3150f5303ba51983178a25fb5bcd12a",
                "parameters": [
                    {
                        "name": "business",
                        "in": "path",
                        "description": "ID del negocio",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Resultado de la verificación",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "can_create": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Puedes crear un nuevo producto en este negocio."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/subscription/change-plan": {
            "put": {
                "tags": [
                    "Suscripciones"
                ],
                "summary": "Cambiar plan de suscripción",
                "description": "Cambia el plan de suscripción de un usuario específico. Solo accesible para administradores.",
                "operationId": "222e77b08b8bf391b7896e4e32e3fdaa",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "user_id": {
                                        "type": "integer",
                                        "example": 1
                                    },
                                    "new_plan": {
                                        "type": "string",
                                        "enum": [
                                            "free",
                                            "basic",
                                            "premium",
                                            "enterprise"
                                        ],
                                        "example": "premium"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Plan de suscripción cambiado correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Suscripción cambiada a Premium correctamente. Algunos negocios o productos pueden haber sido desactivados si excedían los límites del nuevo plan."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Error de validación de los datos enviados"
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/subscription/status": {
            "get": {
                "tags": [
                    "Suscripciones"
                ],
                "summary": "Estado de la suscripción",
                "description": "Devuelve el estado actual de la suscripción del usuario autenticado, incluyendo límites de negocios y productos según el plan.",
                "operationId": "e193a7c32456b6711e44251bc5df6272",
                "responses": {
                    "200": {
                        "description": "Estado de la suscripción",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "type": {
                                            "type": "string",
                                            "example": "premium"
                                        },
                                        "product_limit": {
                                            "type": "integer",
                                            "example": 500
                                        },
                                        "is_active": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "status": {
                                            "type": "string",
                                            "example": "active"
                                        },
                                        "max_businesses": {
                                            "type": "integer",
                                            "example": 10
                                        },
                                        "max_products": {
                                            "type": "integer",
                                            "example": 500
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/subscription/register-payment": {
            "post": {
                "tags": [
                    "Suscripciones"
                ],
                "summary": "Registrar pago de suscripción",
                "description": "Registra un pago exitoso para la suscripción actual del usuario.",
                "operationId": "d1f2e0939bc8f9b9425018be99f31d28",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "payment_method": {
                                        "type": "string",
                                        "enum": [
                                            "mercadopago",
                                            "transferencia",
                                            "tarjeta"
                                        ],
                                        "example": "mercadopago"
                                    },
                                    "transaction_id": {
                                        "description": "ID de la transacción",
                                        "type": "string",
                                        "example": "MP123456789"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Pago registrado correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Pago registrado. Tu suscripción está activa hasta el 13-02-2026."
                                        },
                                        "next_payment_due": {
                                            "type": "string",
                                            "example": "13-02-2026"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/login": {
            "post": {
                "tags": [
                    "Autenticación"
                ],
                "summary": "Iniciar sesión de usuario",
                "description": "Autentica al usuario con email y contraseña, devolviendo el token de acceso y sus datos.",
                "operationId": "a3b306d14572d1f4bd6c064b3233e7b8",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "email",
                                    "password"
                                ],
                                "properties": {
                                    "email": {
                                        "type": "string",
                                        "example": "usuario@ejemplo.com"
                                    },
                                    "password": {
                                        "type": "string",
                                        "example": "12345678"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Inicio de sesión exitoso",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "user": {
                                            "type": "object"
                                        },
                                        "token": {
                                            "type": "string",
                                            "example": "1|eyJ0eXAiOiJKV1Qi..."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Credenciales incorrectas"
                    }
                }
            }
        },
        "/api/logout": {
            "post": {
                "tags": [
                    "Autenticación"
                ],
                "summary": "Cerrar sesión",
                "description": "Invalida el token actual del usuario autenticado.",
                "operationId": "fe8f3429cd6979b3b4517e186505f9f9",
                "responses": {
                    "200": {
                        "description": "Sesión cerrada correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Sesión cerrada"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/register": {
            "post": {
                "tags": [
                    "Autenticación"
                ],
                "summary": "Registrar nuevo usuario",
                "description": "Crea un nuevo usuario con rol 'user' y suscripción gratuita.",
                "operationId": "8a56853624e025573120a09a4c75d468",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "name",
                                    "email",
                                    "password"
                                ],
                                "properties": {
                                    "name": {
                                        "type": "string",
                                        "example": "Juan Pérez"
                                    },
                                    "email": {
                                        "type": "string",
                                        "example": "usuario@ejemplo.com"
                                    },
                                    "password": {
                                        "type": "string",
                                        "example": "12345678"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Usuario creado correctamente",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Usuario creado"
                                        },
                                        "user": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Datos inválidos"
                    }
                }
            }
        }
    },
    "components": {
        "schemas": {
            "BusinessCategory": {
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1
                    },
                    "name": {
                        "type": "string",
                        "example": "Restaurantes"
                    },
                    "description": {
                        "type": "string",
                        "example": "Negocios gastronómicos"
                    }
                },
                "type": "object"
            },
            "BusinessImage": {
                "required": [
                    "id",
                    "business_id",
                    "url"
                ],
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1
                    },
                    "business_id": {
                        "type": "integer",
                        "example": 5
                    },
                    "url": {
                        "type": "string",
                        "example": "business_images/abc123.jpg"
                    },
                    "is_primary": {
                        "type": "boolean",
                        "example": false
                    },
                    "description": {
                        "type": "string",
                        "example": "Fachada de la panadería",
                        "nullable": true
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-10-20T13:45:00Z"
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-10-20T13:50:00Z"
                    }
                },
                "type": "object"
            },
            "BusinessRating": {
                "required": [
                    "id",
                    "business_id",
                    "user_id",
                    "service_quality",
                    "created_at",
                    "updated_at"
                ],
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1
                    },
                    "business_id": {
                        "type": "integer",
                        "example": 1
                    },
                    "user_id": {
                        "type": "integer",
                        "example": 1
                    },
                    "service_quality": {
                        "description": "Calificación (1-5)",
                        "type": "integer",
                        "example": 5
                    },
                    "comment": {
                        "description": "Comentario opcional",
                        "type": "string",
                        "example": "Excelente servicio"
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-10-26T12:34:56.000000Z"
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-10-26T12:34:56.000000Z"
                    },
                    "user": {
                        "$ref": "#/components/schemas/User"
                    }
                },
                "type": "object"
            },
            "Business": {
                "required": [
                    "id",
                    "user_id",
                    "name"
                ],
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1
                    },
                    "user_id": {
                        "type": "integer",
                        "example": 10
                    },
                    "name": {
                        "type": "string",
                        "example": "Panadería San Jorge"
                    },
                    "description": {
                        "type": "string",
                        "example": "Panadería artesanal con más de 20 años de experiencia",
                        "nullable": true
                    },
                    "address": {
                        "type": "string",
                        "example": "Calle Falsa 123",
                        "nullable": true
                    },
                    "latitude": {
                        "type": "number",
                        "format": "float",
                        "example": -34.6037,
                        "nullable": true
                    },
                    "longitude": {
                        "type": "number",
                        "format": "float",
                        "example": -58.3816,
                        "nullable": true
                    },
                    "phone": {
                        "type": "string",
                        "example": "+54 11 1234-5678",
                        "nullable": true
                    },
                    "email": {
                        "type": "string",
                        "format": "email",
                        "example": "contacto@panaderiasanjorge.com",
                        "nullable": true
                    },
                    "website": {
                        "type": "string",
                        "example": "https://panaderiasanjorge.com",
                        "nullable": true
                    },
                    "is_active": {
                        "type": "boolean",
                        "example": true
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-10-20T13:45:00Z"
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-10-20T13:50:00Z"
                    },
                    "products": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/Product"
                        }
                    },
                    "categories": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/BusinessCategory"
                        }
                    }
                },
                "type": "object"
            },
            "Conversation": {
                "required": [
                    "user1_id",
                    "user2_id"
                ],
                "properties": {
                    "id": {
                        "description": "ID de la conversación",
                        "type": "integer",
                        "example": 1
                    },
                    "user1_id": {
                        "description": "ID del primer usuario",
                        "type": "integer",
                        "example": 1
                    },
                    "user2_id": {
                        "description": "ID del segundo usuario",
                        "type": "integer",
                        "example": 2
                    },
                    "created_at": {
                        "description": "Fecha de creación",
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-11-21T18:00:00.000000Z"
                    },
                    "updated_at": {
                        "description": "Fecha de última actualización",
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-11-21T18:00:00.000000Z"
                    },
                    "other_user": {
                        "description": "Datos del otro usuario en la conversación",
                        "properties": {
                            "id": {
                                "type": "integer",
                                "example": 2
                            },
                            "name": {
                                "type": "string",
                                "example": "María Gómez"
                            }
                        },
                        "type": "object"
                    },
                    "last_message": {
                        "description": "Último mensaje de la conversación",
                        "properties": {
                            "id": {
                                "type": "integer",
                                "example": 5
                            },
                            "message": {
                                "type": "string",
                                "example": "Hola, ¿cómo estás?"
                            },
                            "created_at": {
                                "type": "string",
                                "format": "date-time",
                                "example": "2025-11-21T18:01:00.000000Z"
                            },
                            "is_read": {
                                "type": "boolean",
                                "example": true
                            }
                        },
                        "type": "object"
                    },
                    "unread_count": {
                        "description": "Número de mensajes no leídos",
                        "type": "integer",
                        "example": 1
                    }
                },
                "type": "object"
            },
            "DiscountToken": {
                "title": "Token de Descuento",
                "description": "Token de descuento generado por un usuario para un negocio o producto",
                "properties": {
                    "id": {
                        "description": "ID del token",
                        "type": "integer",
                        "example": 1
                    },
                    "code": {
                        "description": "Código único del token",
                        "type": "string",
                        "example": "ABCD-1234"
                    },
                    "business_id": {
                        "description": "ID del negocio",
                        "type": "integer",
                        "example": 21
                    },
                    "product_id": {
                        "description": "ID del producto (nullable)",
                        "type": "integer",
                        "example": 5
                    },
                    "user_id": {
                        "description": "ID del usuario que generó el token",
                        "type": "integer",
                        "example": 3
                    },
                    "discount_type": {
                        "description": "Tipo de descuento",
                        "type": "string",
                        "enum": [
                            "percentage",
                            "fixed"
                        ],
                        "example": "percentage"
                    },
                    "discount_value": {
                        "description": "Valor del descuento (10 para 10% o 5.00 para $5)",
                        "type": "number",
                        "example": 10
                    },
                    "min_purchase": {
                        "description": "Mínimo de compra requerido (nullable)",
                        "type": "number",
                        "example": 50
                    },
                    "max_uses": {
                        "description": "Número máximo de usos",
                        "type": "integer",
                        "example": 1
                    },
                    "uses_count": {
                        "description": "Número de veces que se ha usado",
                        "type": "integer",
                        "example": 0
                    },
                    "valid_from": {
                        "description": "Fecha desde cuando es válido",
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-10-26T00:00:00.000000Z"
                    },
                    "valid_until": {
                        "description": "Fecha hasta cuando es válido",
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-11-02T00:00:00.000000Z"
                    },
                    "description": {
                        "description": "Descripción del descuento",
                        "type": "string",
                        "example": "10% de descuento en tu próxima compra"
                    },
                    "is_active": {
                        "description": "Si el cupón está activo",
                        "type": "boolean",
                        "example": true
                    },
                    "created_at": {
                        "description": "Fecha de creación",
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-10-26T12:34:56.000000Z"
                    },
                    "updated_at": {
                        "description": "Fecha de última actualización",
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-10-26T12:34:56.000000Z"
                    },
                    "business": {
                        "$ref": "#/components/schemas/Business"
                    },
                    "product": {
                        "$ref": "#/components/schemas/Product"
                    },
                    "user": {
                        "$ref": "#/components/schemas/User"
                    }
                },
                "type": "object"
            },
            "Message": {
                "required": [
                    "conversation_id",
                    "sender_id",
                    "message"
                ],
                "properties": {
                    "id": {
                        "description": "ID del mensaje",
                        "type": "integer",
                        "example": 1
                    },
                    "conversation_id": {
                        "description": "ID de la conversación",
                        "type": "integer",
                        "example": 1
                    },
                    "sender_id": {
                        "description": "ID del usuario que envió el mensaje",
                        "type": "integer",
                        "example": 1
                    },
                    "message": {
                        "description": "Contenido del mensaje",
                        "type": "string",
                        "example": "Hola, ¿cómo estás?"
                    },
                    "is_read": {
                        "description": "Indica si el mensaje ha sido leído",
                        "type": "boolean",
                        "example": false
                    },
                    "created_at": {
                        "description": "Fecha de creación del mensaje",
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-11-21T18:01:00.000000Z"
                    },
                    "sender": {
                        "description": "Datos del usuario que envió el mensaje",
                        "properties": {
                            "id": {
                                "description": "ID del usuario",
                                "type": "integer",
                                "example": 1
                            },
                            "name": {
                                "description": "Nombre del usuario",
                                "type": "string",
                                "example": "Juan Pérez"
                            }
                        },
                        "type": "object"
                    }
                },
                "type": "object"
            },
            "ProductCategory": {
                "required": [
                    "id",
                    "name"
                ],
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1
                    },
                    "name": {
                        "type": "string",
                        "example": "Panadería"
                    },
                    "description": {
                        "type": "string",
                        "example": "Productos de panadería y repostería",
                        "nullable": true
                    },
                    "parent_id": {
                        "type": "integer",
                        "example": 2,
                        "nullable": true
                    },
                    "is_active": {
                        "type": "boolean",
                        "example": true
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-10-20T13:45:00Z"
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-10-20T13:50:00Z"
                    },
                    "children": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/ProductCategory"
                        }
                    }
                },
                "type": "object"
            },
            "ProductImage": {
                "required": [
                    "id",
                    "product_id",
                    "url"
                ],
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1
                    },
                    "product_id": {
                        "type": "integer",
                        "example": 5
                    },
                    "url": {
                        "type": "string",
                        "example": "https://cdn.example.com/images/pan.jpg"
                    },
                    "is_primary": {
                        "type": "boolean",
                        "example": true
                    },
                    "description": {
                        "type": "string",
                        "example": "Imagen principal del pan integral",
                        "nullable": true
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-10-20T13:45:00Z"
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-10-20T13:50:00Z"
                    }
                },
                "type": "object"
            },
            "ProductRating": {
                "required": [
                    "id",
                    "product_id",
                    "user_id",
                    "quality",
                    "created_at",
                    "updated_at"
                ],
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1
                    },
                    "product_id": {
                        "type": "integer",
                        "example": 1
                    },
                    "user_id": {
                        "type": "integer",
                        "example": 1
                    },
                    "quality": {
                        "description": "Calificación (1-5)",
                        "type": "integer",
                        "example": 4
                    },
                    "comment": {
                        "description": "Comentario opcional",
                        "type": "string",
                        "example": "Producto de buena calidad"
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-10-26T12:34:56.000000Z"
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-10-26T12:34:56.000000Z"
                    },
                    "user": {
                        "$ref": "#/components/schemas/User"
                    }
                },
                "type": "object"
            },
            "Product": {
                "required": [
                    "id",
                    "name",
                    "price",
                    "stock"
                ],
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1
                    },
                    "name": {
                        "type": "string",
                        "example": "Pan artesanal integral"
                    },
                    "description": {
                        "type": "string",
                        "example": "Pan con harina integral y semillas",
                        "nullable": true
                    },
                    "price": {
                        "type": "number",
                        "format": "float",
                        "example": 350.5
                    },
                    "stock": {
                        "type": "integer",
                        "example": 20
                    },
                    "is_active": {
                        "type": "boolean",
                        "example": true
                    },
                    "category_id": {
                        "type": "integer",
                        "example": 3
                    },
                    "business_id": {
                        "type": "integer",
                        "example": 5
                    },
                    "category": {
                        "properties": {
                            "id": {
                                "type": "integer",
                                "example": 3
                            },
                            "name": {
                                "type": "string",
                                "example": "Panadería"
                            }
                        },
                        "type": "object"
                    },
                    "business": {
                        "properties": {
                            "id": {
                                "type": "integer",
                                "example": 5
                            },
                            "name": {
                                "type": "string",
                                "example": "Panadería San Jorge"
                            }
                        },
                        "type": "object"
                    },
                    "images": {
                        "type": "array",
                        "items": {
                            "properties": {
                                "url": {
                                    "type": "string",
                                    "example": "https://cdn.chivimarket.arumasoft.com/pan.jpg"
                                }
                            },
                            "type": "object"
                        }
                    }
                },
                "type": "object"
            },
            "Subscription": {
                "required": [
                    "id",
                    "user_id",
                    "type",
                    "product_limit",
                    "is_active"
                ],
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1
                    },
                    "user_id": {
                        "type": "integer",
                        "example": 10
                    },
                    "type": {
                        "type": "string",
                        "enum": [
                            "free",
                            "basic",
                            "premium",
                            "enterprise"
                        ],
                        "example": "premium"
                    },
                    "product_limit": {
                        "type": "integer",
                        "example": 500
                    },
                    "starts_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-10-20T13:45:00Z"
                    },
                    "ends_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2026-10-20T13:45:00Z",
                        "nullable": true
                    },
                    "is_active": {
                        "type": "boolean",
                        "example": true
                    },
                    "status": {
                        "type": "string",
                        "example": "active"
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-10-20T13:45:00Z"
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-10-20T13:50:00Z"
                    }
                },
                "type": "object"
            },
            "User": {
                "required": [
                    "id",
                    "name",
                    "email"
                ],
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1
                    },
                    "name": {
                        "type": "string",
                        "example": "Juan Pérez"
                    },
                    "email": {
                        "type": "string",
                        "format": "email",
                        "example": "juan@example.com"
                    },
                    "email_verified_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-10-20T13:45:00Z",
                        "nullable": true
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-10-20T13:45:00Z"
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-10-20T13:50:00Z"
                    },
                    "businesses": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/Business"
                        }
                    },
                    "subscription": {
                        "$ref": "#/components/schemas/Subscription"
                    }
                },
                "type": "object"
            },
            "Contact": {
                "required": [
                    "contactable_type",
                    "contactable_id",
                    "contact_type"
                ],
                "properties": {
                    "user_id": {
                        "description": "ID del usuario (nullable si no está autenticado)",
                        "type": "integer",
                        "example": 1
                    },
                    "contactable_type": {
                        "description": "Tipo de entidad contactada",
                        "type": "string",
                        "enum": [
                            "business",
                            "product"
                        ],
                        "example": "business"
                    },
                    "contactable_id": {
                        "description": "ID de la entidad contactada",
                        "type": "integer",
                        "example": 21
                    },
                    "contact_type": {
                        "description": "Tipo de contacto",
                        "type": "string",
                        "enum": [
                            "phone_view",
                            "email_view",
                            "address_view",
                            "website_click",
                            "social_click",
                            "copy_contact",
                            "favorite",
                            "share",
                            "map_view",
                            "catalog_download"
                        ],
                        "example": "phone_view"
                    },
                    "ip": {
                        "description": "IP del visitante",
                        "type": "string",
                        "example": "192.168.1.1"
                    },
                    "user_agent": {
                        "description": "User agent del navegador",
                        "type": "string",
                        "example": "Mozilla/5.0"
                    },
                    "referer": {
                        "description": "URL de referencia",
                        "type": "string",
                        "example": "https://chivimarket.arumasoft.com"
                    },
                    "created_at": {
                        "description": "Fecha de creación",
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-10-26T12:34:56.000000Z"
                    }
                },
                "type": "object"
            }
        }
    },
    "tags": [
        {
            "name": "BusinessRatings",
            "description": "API para gestionar calificaciones de negocios"
        },
        {
            "name": "Contacts",
            "description": "API para registrar y gestionar contactos con negocios/productos"
        },
        {
            "name": "Imágenes",
            "description": "Endpoints relacionados con la gestión de imágenes de negocios."
        },
        {
            "name": "Messaging",
            "description": "API para el sistema de mensajería entre usuarios"
        },
        {
            "name": "ProductImages",
            "description": "API para gestionar imágenes de productos"
        },
        {
            "name": "ProductRatings",
            "description": "API para gestionar calificaciones de productos"
        },
        {
            "name": "Negocios",
            "description": "Negocios"
        },
        {
            "name": "Imágenes de Negocio",
            "description": "Imágenes de Negocio"
        },
        {
            "name": "Logo de Negocio",
            "description": "Logo de Negocio"
        },
        {
            "name": "Categorías",
            "description": "Categorías"
        },
        {
            "name": "DiscountTokens",
            "description": "DiscountTokens"
        },
        {
            "name": "Categorías de Productos",
            "description": "Categorías de Productos"
        },
        {
            "name": "Productos",
            "description": "Productos"
        },
        {
            "name": "Búsquedas",
            "description": "Búsquedas"
        },
        {
            "name": "Suscripciones",
            "description": "Suscripciones"
        },
        {
            "name": "Autenticación",
            "description": "Autenticación"
        }
    ]
}